<UserControl x:Class="BAT_Man.Views.FirmaAnlegenView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="600">

    <StackPanel Margin="20" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Top">


        <Label Content="Firma:" Foreground="{DynamicResource TextForeground}"/>
        <TextBox Width="400"
                 Text="{Binding FirmaZumBearbeiten.Firmenname, UpdateSourceTrigger=PropertyChanged}"/>

        <Label Content="Straße / Hausnr.:" Foreground="{DynamicResource TextForeground}" Margin="0,10,0,0"/>
        <Grid Width="400">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>
            <TextBox Grid.Column="0"
                     Text="{Binding FirmaZumBearbeiten.Strasse, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBox Grid.Column="1" Margin="10,0,0,0"
                     Text="{Binding FirmaZumBearbeiten.Hausnummer, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <Label Content="PLZ / Ort:" Foreground="{DynamicResource TextForeground}" Margin="0,10,0,0"/>
        <Grid Width="400">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>
            <TextBox Grid.Column="0"
                     Text="{Binding FirmaZumBearbeiten.PLZ, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBox Grid.Column="1" Margin="10,0,0,0"
                     Text="{Binding FirmaZumBearbeiten.Ort, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <Label Content="Ansprechpartner:" Foreground="{DynamicResource TextForeground}" Margin="0,10,0,0"/>
        <TextBox Width="400"
                 Text="{Binding FirmaZumBearbeiten.Ansprechpartner, UpdateSourceTrigger=PropertyChanged}"/>

        <Label Content="Telefon:" Foreground="{DynamicResource TextForeground}" Margin="0,10,0,0"/>
        <TextBox Width="400"
                 Text="{Binding FirmaZumBearbeiten.Telefon, UpdateSourceTrigger=PropertyChanged}"/>

        <Label Content="E-Mail:" Foreground="{DynamicResource TextForeground}" Margin="0,10,0,0"/>
        <TextBox Width="400"
                 Text="{Binding FirmaZumBearbeiten.EMail, UpdateSourceTrigger=PropertyChanged}"/>

        <!--  BUTTONS -->
        <Grid Margin="0,30,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!--  
                Statt Binding an einen starren C#-Text nutzen wir jetzt einen Style mit Trigger.
                Standard: "Speichern" (SaveButton)
                Wenn IsEditMode=True: "Aktualisieren" (UpdateButton)
                Dadurch greifen die DynamicResources und die Sprache schaltet um!
            -->
            <Button Grid.Column="0"
                    Command="{Binding SpeichernCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                    Width="150"
                    HorizontalAlignment="Left"
                    IsDefault="True">
                <Button.Style>
                    <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                        <!-- Standard-Text: Speichern -->
                        <Setter Property="Content" Value="{DynamicResource SaveButton}"/>
                        <Style.Triggers>
                            <!-- Wenn wir im Bearbeiten-Modus sind -> Aktualisieren -->
                            <DataTrigger Binding="{Binding IsEditMode}" Value="True">
                                <Setter Property="Content" Value="{DynamicResource UpdateButton}"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button Grid.Column="1"
                    Content="{DynamicResource CancelButton}" 
                    Command="{Binding AbbrechenCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                    Width="150"
                    HorizontalAlignment="Right"
                    IsCancel="True"/>
        </Grid>

    </StackPanel>
</UserControl>